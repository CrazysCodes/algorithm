## Spring Boot

## Spring CLoud

### CAP定理

在一个分布式系统中，一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance）；这三个要素最多只能同时实现两点，不可能三者兼顾。

### 五大组件

- #### 服务注册中心

	1. **Eureka**：是去中心化方式的集群，集群中保证了只要有一个服务存活，就可以提供服务，但这种方式无法保证数据的一致性（C）。它主要有服务端（提供服务注册中心）和客户端（向注册中心注册自身服务）两个部分。
	2. **Zookeeper**：一主多从的集群，leader节点接收到数据的时候，同步数据到follower节点，只有超过一半以上的follower节点同步完成它才会返回写成功。与Eureka不同，zk的leader节点宕机，会启动选举方式从follower节点中选取一个作为leader，这期间zk无法对外提供服务，无法保证CAP中的A可用性原则。
- #### 负载均衡
	1. **Ribbon**：客户端均衡工具，主要功能是提供客户端的软件负载均衡算法和服务调用。
	2. **Feign**：负载均衡客户端，内置的Ribbon，是对Ribbon的一种封装解决方案，Feign本身不支持Spring MVC的注解，使用Feign的注解定义接口，调用这个接口，就可以调用服务注册中心的服务。Feign在2019年之后就不再进行更新
- #### 熔断降级
	1. **Hystrix**：服务熔断类似于电路的保险丝，为了防止电压过高引起火灾，断开电路，过后重启后可继续使用。当服务的调用出现大量的超时或异常，这时就会断开服务的调用，返回一个友好提示，缓解服务的压力，待到一段时间之后进行尝试放行，如果这时服务无法使用将继续断开，服务可用时可将链路释放正常使用。
- #### 路由网关
	1. **zuul**：作为一个微服务架构，如果没有一个统一的网关入口，那么所有的服务都需要对外暴露接口，安全上就得不到保障，其次对于身份验证、安全、过滤等都需要全部服务来实现
- #### 配置中心
	1. **Spring cloud config**：Spring cloud自带的配置中心，与spring无缝衔接，支持git，但是无可视化操作界面，且配置生效非实时，需要重启或手动刷新
